<!DOCTYPE html>
<html>
<head>
  <title>Socket.IO Live Test</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script> 
</head>
<body>
  <h2>Live Updates:</h2>
  <pre id="log">Waiting for updates...</pre>

  <button onclick="emitTest()">Send Manual Update</button>

  <script>
    const socket = io("http://localhost:5000", {
  path: "/socket.io",
  reconnection: true,
  reconnectionAttempts: Infinity,
  randomizationFactor: 1,
  transports: ["websocket"],
  auth: {
    token: "ABC" // optional â€“ just for testing
  }
});

    socket.on("connect", () => {
      log("ðŸŸ¢ Connected to server");
    });

    socket.on("disconnect", (reason) => {
      log(`ðŸŸ  Disconnected: ${reason}`);
    });

    socket.on("connect_error", (err) => {
      log(`ðŸ”´ Connection error: ${err.message}`);
    });

    socket.on("server_update", (data) => {
      log(`ðŸ”µ Received update:\n${JSON.stringify(data, null, 2)}`);
    });

    function log(msg) {
      document.getElementById("log").textContent += `\n\n${msg}`;
      console.log(msg);
    }

    function emitTest() {
      fetch("/emit-test");
    }
  </script>
</body>
</html>